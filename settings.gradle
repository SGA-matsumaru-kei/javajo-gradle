ext {
    secondLevel = ['java-projects', 'task-projects', 'copy-projects']
    subProjects = secondLevel.collect {
        [parent: it, dir: new File(it)]
    }.collect {
        [
                parent: it.parent,
                dirs: it.dir.listFiles().findAll {
                    it.isDirectory() && !(it.name in ['.gradle', 'biuld', 'images', 'gradle'])
                }
        ]
    }.collect {map ->
        map.dirs.collect {
            def pn = it.name
            def sub = ['init-project', 'dep-project']
            def isInInit = pn in sub
            def pjs = !isInInit ?
                    [":${map.parent}:${it.name}" as String] :
                    it.listFiles().findAll {
                        it.isDirectory() && !(it.name in ['gradle', 'build', 'src', '.gradle', 'libs'])
                    }.collect {
                        ":${map.parent}:${pn}:${it.name}" as String
                    }
            return pjs
        }
    }.flatten().toArray(new String[0])
}
include subProjects
rootProject.name = 'javajo-gradle'
